import { pinyin } from "pinyin-pro";
import type { WordEntry } from "@/lib/types";

function toPinyin(text: string) {
  return pinyin(text, { toneType: "symbol", type: "array" }).join(" ");
}

function uniqueStable(items: string[]) {
  const seen = new Set<string>();
  const out: string[] = [];
  for (const x of items) {
    const s = x.trim();
    if (!s) continue;
    if (seen.has(s)) continue;
    seen.add(s);
    out.push(s);
  }
  return out;
}

function buildHanziWords() {
  const words: string[] = [];

  // 家庭 / 称呼
  words.push(
    "妈妈",
    "爸爸",
    "爷爷",
    "奶奶",
    "外公",
    "外婆",
    "哥哥",
    "姐姐",
    "弟弟",
    "妹妹",
    "宝宝",
    "孩子",
    "家人",
    "家里",
    "家",
    "亲亲",
    "拥抱",
    "握手",
    "朋友",
    "同学",
    "老师",
    "园长",
    "阿姨",
    "叔叔",
    "伯伯",
    "舅舅",
    "姑姑",
    "姨妈",
    "邻居",
    "客人"
  );

  // 礼貌 / 交流
  words.push(
    "你好",
    "再见",
    "谢谢",
    "不客气",
    "对不起",
    "没关系",
    "请",
    "好的",
    "可以",
    "不可以",
    "我来",
    "我会",
    "我想",
    "我懂",
    "我知道",
    "不要",
    "要",
    "给我",
    "帮我",
    "一起"
  );

  // 幼儿园 / 学习
  words.push(
    "幼儿园",
    "学校",
    "教室",
    "操场",
    "厕所",
    "午睡",
    "上课",
    "下课",
    "排队",
    "点名",
    "上学",
    "放学",
    "早读",
    "画画",
    "唱歌",
    "跳舞",
    "讲故事",
    "读书",
    "写字",
    "识字",
    "数数",
    "颜色",
    "形状",
    "作业",
    "本子",
    "书包",
    "铅笔",
    "橡皮",
    "尺子",
    "盒彩笔",
    "画笔",
    "剪刀",
    "胶水",
    "贴纸"
  );

  // 身体 / 健康
  words.push(
    "头",
    "头发",
    "眼睛",
    "鼻子",
    "嘴巴",
    "牙齿",
    "舌头",
    "耳朵",
    "脸",
    "脖子",
    "肩膀",
    "手",
    "手心",
    "手指",
    "指甲",
    "胳膊",
    "肚子",
    "背",
    "腿",
    "脚",
    "脚趾",
    "心跳",
    "呼吸",
    "生病",
    "难受",
    "疼",
    "发烧",
    "咳嗽",
    "打喷嚏",
    "流鼻涕",
    "看医生",
    "吃药"
  );

  // 生活习惯 / 卫生
  words.push(
    "起床",
    "睡觉",
    "午睡",
    "刷牙",
    "洗脸",
    "洗手",
    "洗澡",
    "擦手",
    "擦脸",
    "穿衣",
    "脱衣",
    "穿鞋",
    "脱鞋",
    "系鞋带",
    "上厕所",
    "冲水",
    "纸巾",
    "毛巾",
    "牙刷",
    "牙膏",
    "梳子",
    "镜子"
  );

  // 食物 / 饮品
  words.push(
    "米饭",
    "面条",
    "馒头",
    "包子",
    "饺子",
    "粥",
    "汤",
    "鸡蛋",
    "牛奶",
    "酸奶",
    "面包",
    "蛋糕",
    "饼干",
    "糖果",
    "巧克力",
    "水果",
    "苹果",
    "香蕉",
    "梨",
    "橙子",
    "葡萄",
    "西瓜",
    "草莓",
    "桃子",
    "樱桃",
    "猕猴桃",
    "菠萝",
    "火龙果",
    "番茄",
    "黄瓜",
    "胡萝卜",
    "青菜",
    "玉米",
    "土豆",
    "肉",
    "鸡肉",
    "牛肉",
    "鱼",
    "虾",
    "喝水",
    "水杯",
    "果汁"
  );

  // 物品 / 家居
  words.push(
    "桌子",
    "椅子",
    "沙发",
    "床",
    "枕头",
    "被子",
    "衣柜",
    "门",
    "窗",
    "灯",
    "风扇",
    "空调",
    "电视",
    "手机",
    "平板",
    "电脑",
    "书",
    "玩具",
    "积木",
    "拼图",
    "娃娃",
    "小车",
    "球",
    "气球",
    "风筝",
    "滑梯",
    "秋千",
    "跷跷板",
    "轮滑",
    "自行车"
  );

  // 动物
  words.push(
    "小猫",
    "小狗",
    "小兔",
    "小鸟",
    "小鱼",
    "金鱼",
    "乌龟",
    "仓鼠",
    "熊猫",
    "老虎",
    "狮子",
    "大象",
    "长颈鹿",
    "猴子",
    "小熊",
    "松鼠",
    "狐狸",
    "河马",
    "斑马",
    "鳄鱼",
    "海豚",
    "鲸鱼",
    "蝴蝶",
    "蜜蜂",
    "蚂蚁",
    "蜗牛"
  );

  // 自然 / 天气 / 时间
  words.push(
    "太阳",
    "月亮",
    "星星",
    "天空",
    "白云",
    "彩虹",
    "下雨",
    "下雪",
    "刮风",
    "打雷",
    "闪电",
    "春天",
    "夏天",
    "秋天",
    "冬天",
    "早上",
    "中午",
    "下午",
    "晚上",
    "今天",
    "明天",
    "昨天",
    "现在",
    "马上"
  );

  // 情绪 / 夸赞
  words.push(
    "开心",
    "难过",
    "生气",
    "害怕",
    "紧张",
    "勇敢",
    "温柔",
    "可爱",
    "漂亮",
    "干净",
    "整齐",
    "认真",
    "努力",
    "加油",
    "棒棒",
    "谢谢你",
    "真厉害"
  );

  // 交通 / 出行 / 地点
  words.push(
    "走路",
    "跑步",
    "跳",
    "坐车",
    "公交车",
    "地铁",
    "出租车",
    "汽车",
    "火车",
    "飞机",
    "轮船",
    "回家",
    "出门",
    "公园",
    "游乐园",
    "超市",
    "医院",
    "图书馆",
    "餐厅",
    "商店"
  );

  // 颜色（单字形容词，方便组合生成）
  const colors = ["红", "黄", "蓝", "绿", "粉", "紫", "橙", "黑", "白", "灰"];

  // 常见名词（用于颜色/大小组合）
  const colorTargets = [
    "苹果",
    "香蕉",
    "西瓜",
    "草莓",
    "葡萄",
    "樱桃",
    "桃子",
    "梨",
    "橙子",
    "气球",
    "花",
    "裙子",
    "袜子",
    "帽子",
    "雨伞",
    "书包",
    "铅笔",
    "杯子",
    "小车",
    "球",
    "积木",
    "风筝",
    "小猫",
    "小狗",
    "小鸟",
    "小鱼"
  ];

  for (const c of colors) {
    for (const t of colorTargets) {
      words.push(`${c}${t}`);
    }
  }

  // 大/小 + 名词（幼儿常用描述）
  const sizes = ["大", "小"];
  const sizeTargets = [
    "房子",
    "门",
    "窗",
    "桌子",
    "椅子",
    "床",
    "枕头",
    "被子",
    "书包",
    "杯子",
    "勺子",
    "碗",
    "盘子",
    "苹果",
    "西瓜",
    "草莓",
    "蛋糕",
    "小车",
    "气球",
    "球",
    "小猫",
    "小狗",
    "小熊",
    "大象",
    "老虎",
    "狮子"
  ];
  for (const s of sizes) {
    for (const t of sizeTargets) {
      words.push(`${s}${t}`);
    }
  }

  // 常见动作（两字为主）
  words.push(
    "吃饭",
    "喝水",
    "睡觉",
    "起床",
    "洗手",
    "刷牙",
    "洗澡",
    "穿衣",
    "脱衣",
    "走路",
    "跑步",
    "跳绳",
    "拍球",
    "踢球",
    "画画",
    "唱歌",
    "跳舞",
    "读书",
    "写字",
    "听话",
    "整理",
    "收拾",
    "帮助",
    "分享",
    "排队",
    "等待",
    "举手",
    "回答",
    "注意",
    "小心"
  );

  // 形状 + 物品组合（常见启蒙）
  const shapes = ["圆", "方", "三角", "心形"];
  const shapeTargets = ["饼干", "积木", "气球", "贴纸", "蛋糕"];
  for (const s of shapes) {
    for (const t of shapeTargets) {
      words.push(`${s}${t}`);
    }
  }

  const extra =
    `
早餐 午餐 晚餐 点心 零食 甜甜 辣辣 酸酸 咸咸 香香
热水 冷水 温水 开水 口渴 饥饿 饱了 好吃 难吃
筷子 勺子 叉子 小碗 大碗 盘子 餐巾 围裙
厨房 客厅 卧室 阳台 走廊 楼梯 电梯
开门 关门 开灯 关灯 开窗 关窗
洗衣 晾衣 叠衣 抱抱 亲亲
袜子 鞋子 拖鞋 运动鞋 外套 夹克 毛衣 裤子 短裤 裙子 连衣裙
雨衣 雨伞 手套 围巾 帽子 口罩
口香糖 棒棒糖 冰淇淋 果冻 布丁
番茄酱 沙拉酱
纸杯 纸盘 纸碗
洗发水 沐浴露 香皂 肥皂 消毒 洗手液
剪指甲 绑头发
玩沙 玩水 堆雪人
捉迷藏 过家家
滑板车 童车 安全座
红绿灯 斑马线 过马路
左边 右边 前面 后面 上面 下面 里面 外面
高兴 生气 难过 害怕 期待 想念
喜欢 讨厌 需要 可以 不能
快点 慢点 小声 大声
早早 晚晚
一 二 三 四 五 六 七 八 九 十
一条 一只 一个 一朵 一颗 一块 一杯 一碗
春 夏 秋 冬
早 中 晚
洗菜 切菜 炒菜 煮饭
刷碗 擦桌子 扫地 拖地
花园 草地 小路 大路 马路
山 水 河 湖 海
石头 沙子 泥土
花朵 小草 大树 树叶 树枝
开花 结果 发芽 长大
老师好 同学好
一起玩 一起走 一起学 一起吃
排队等 排队走
讲礼貌 懂礼貌
早睡早起
爱护 玩具 爱护 图书
安全 第一 小心点
不着急 慢慢来
谢谢你 你真棒
我可以 我不行 我试试
我害怕 我开心 我难过
不要哭 不要怕
给你 还你 借你
你的 我的 他 的 她 的 我们 你们
`
      .trim()
      .split(/\s+/);
  words.push(...extra);

  const fillTargets = [
    "饼干",
    "蛋糕",
    "糖果",
    "果冻",
    "苹果",
    "香蕉",
    "西瓜",
    "草莓",
    "葡萄",
    "牛奶",
    "面包",
    "鸡蛋",
    "米饭",
    "小车",
    "娃娃",
    "积木",
    "拼图",
    "气球",
    "雨伞",
    "帽子",
    "袜子",
    "裙子",
    "外套",
    "杯子",
    "勺子",
    "碗",
    "盘子"
  ];
  const qty = ["一", "两", "三", "四", "五"];
  for (const q of qty) {
    for (const t of fillTargets) {
      words.push(`${q}${t}`);
    }
  }

  const uniq = uniqueStable(words);

  if (uniq.length < 1000) {
    const more: string[] = [];
    for (const c of colors) {
      for (const s of sizes) {
        for (const t of fillTargets) {
          more.push(`${c}${s}${t}`);
        }
      }
    }
    const uniq2 = uniqueStable([...uniq, ...more]);
    if (uniq2.length < 1000) {
      throw new Error(`Word list too small: ${uniq2.length}`);
    }
    return uniq2.slice(0, 1000);
  }

  return uniq.slice(0, 1000);
}

export const WORD_BANK: WordEntry[] = buildHanziWords().map((hanzi) => ({
  hanzi,
  pinyin: toPinyin(hanzi)
}));

